<!doctype html>

<html lang="en">
<head>
    <link href="css/index.css" media="screen" rel="stylesheet" type="text/css"/>
    <title>Open Picturephone</title>
</head>
<body>
<main id="mainJoin">
    <h1 style="text-align:center;">Open Picturephone v0.0.1</h1>
    <section id="joinSection">
        <label>
            Name:<br/>
            <input autocomplete="on" id="inputName" maxlength="32" minlength="1"
                   onkeydown="return enterPress(event, 'inputJoin')" required
                   type="text">
        </label>
        <label>
            Room Code:<br/>
            <input autocomplete="on" id="inputRoom" maxlength="8" minlength="1"
                   onkeydown="return enterPress(event, 'inputJoin')" required
                   type="text">
        </label>
        <input id="inputJoin" type="button" value="Join">
    </section>
</main>
<main class="hidden" hidden id="mainGame">
    <h1 id="cornerTitle">Open Picturephone v0.0.1</h1>
    <aside id="playerSection">
        <div class="title">
            <h1>Players</h1>
            <h1 id="playerCount" style="text-align:right;">1</h1>
        </div>
        <hr>
        <ul id="playerList"></ul>
    </aside>
    <section id="setupSection">
        <div class="title">
            <h1>Game Setup</h1>
            <p class="corner" id="hostName"></p>
        </div>
        <hr>
        <div id="gameSettings">
            <div>
                <dfn aria-label="Whether the first page is written or drawn"
                     title="Whether the first page is written or drawn">
                    First page
                </dfn>
                <div class="isHost hidden">
                    <label>
                        <input aria-label="The first page is a text input" name="firstPage" type="radio" value="Write">
                        Write
                    </label>
                    <label>
                        <input aria-label="The first page is a drawable canvas input" name="firstPage" type="radio"
                               value="Draw">
                        Draw
                    </label>
                </div>
                <div class="isNotHost">
                    <output for="firstPage" id="firstPageDisplay"></output>
                </div>
            </div>
            <div>
                <dfn aria-label="Number of pages in each book" id="isHostLabel" title="Number of pages in each book">
                    Pages per book
                </dfn>
                <div class="center">
                    <div class="isHost hidden">
                        <input aria-labelledby="isHostLabel" id="pageCount" max="20" min="2" name="pageCount"
                               type="range">
                    </div>
                    <output for="pageCount" id="pageCountDisplay"></output>
                </div>
            </div>
            <div>
                <dfn aria-label="How pages are assigned to players" title="How pages are assigned to players">
                    Page assignment
                </dfn>
                <div class="isHost hidden">
                    <label>
                        <input aria-label="Pages are assigned in a cyclic order" name="pageOrder" type="radio"
                               value="Normal">
                        Normal
                    </label>
                    <label>
                        <input aria-label="Pages are assigned in a semi-random order" name="pageOrder" type="radio"
                               value="Random">
                        Random
                    </label>
                </div>
                <div class="isNotHost">
                    <output for="pageOrder" id="pageOrderDisplay"></output>
                </div>
            </div>
            <div>
                <dfn aria-label="Whether there are colour palette restrictions on the drawings"
                     title="Whether there are colour palette restrictions on the drawings">
                    Colour palette
                </dfn>
                <div class="isHost hidden">
                    <label>
                        <select id="colourPalette">
                            <option value="No palette">No palette</option>
                        </select>
                    </label>
                </div>
                <div class="isNotHost">
                    <output for="colourPalette" id="colourPaletteDisplay"></output>
                </div>
            </div>
            <hr>
            <div>
                <dfn aria-label="Time limit per writing page (in minutes)" id="timeWriteLabel"
                     title="Time limit per writing page (in minutes)">
                    Write time limit
                </dfn>
                <div class="center">
                    <div class="isHost hidden">
                        <input aria-labelledby="timeWriteLabel" id="timeWrite" max="15" min="0" name="timeWrite"
                               type="range">
                    </div>
                    <output for="timeWrite" id="timeWriteDisplay"></output>
                </div>
            </div>
            <div>
                <dfn aria-label="Time limit per drawing page (in minutes)" id="timeDrawLabel"
                     title="Time limit per drawing page (in minutes)">
                    Draw time limit
                </dfn>
                <div class="center">
                    <div class="isHost hidden">
                        <input aria-labelledby="timeDrawLabel" id="timeDraw" max="15" min="0" name="timeDraw"
                               type="range">
                    </div>
                    <output for="timeDraw" id="timeDrawDisplay"></output>
                </div>
            </div>
        </div>
        <hr>
        <div class="isHost hidden">
            <p id="inputStartWarning" style="text-align:center; font-style:italic; width:100%;">Two or more players
                required to start...</p>
            <input class="hidden" hidden id="inputStart" type="button" value="Start game">
        </div>
        <div class="isNotHost">
            <p style="text-align:center; font-style:italic; width:100%;">Waiting for the host to start the game...</p>
        </div>
    </section>
    <div class="hidden" hidden id="gameSection">
        <section id="gameTitle">
            <label for="inputTitle">
                <b>Book Title</b>
            </label>
            <br/>
            <input autocomplete="off" id="inputTitle" maxlength="40" minlength="1"
                   placeholder="Enter a title for your book"
                   required size="25" spellcheck="true" type="text">
        </section>
        <section class="hidden" hidden id="gamePrevious">
            <p style="font-weight:bold;"><span id="gamePreviousTitle"></span> - previous page:</p>
            <p class="hidden" hidden id="previousWrite"></p>
            <div class="hidden" hidden id="previousDraw">
                <img alt="" id="previousDrawImg" src="img/placeholder.png"/>
            </div>
        </section>
        <section id="gameArea">
            <div class="title">
                <h1 id="pageType"></h1>
                <p class="corner"><span id="pageCurrent">-</span>/<span id="pageMax">-</span></p>
            </div>
            <hr>
            <div class="hidden" hidden id="gameWrite">
                <label for="inputWrite" id="writePrompt">
                    What should the first page say?
                </label>
                <br/>
                <input autocomplete="off" id="inputWrite" maxlength="80" minlength="1" placeholder="Keep it simple!"
                       required size="35" spellcheck="true" type="text">
            </div>
            <div class="hidden" hidden id="gameDraw">
                <img alt="" id="canvasBase" src="img/base.png">
                <canvas height="600" id="c" width="800"></canvas>
            </div>
            <hr>
            <input class="right" id="inputPageSubmit" type="button" value="Submit">
        </section>
    </div>
    <aside id="inviteSection">
        <div class="title">
            <h1>Invite others!</h1>
        </div>
        <hr>
        <div class="title">
            <p>Room code: </p>
            <p class="corner" id="roomCode"></p>
        </div>
    </aside>
    <aside class="hidden" hidden id="bookSection">
        <div class="title">
            <h1>Books</h1>
        </div>
        <hr>
        <ul id="bookList">
            <li style="font-style:italic"></li>
        </ul>
    </aside>
</main>
<a href="https://github.com/darkrilin/open-picturephone" id="copyright">&copy; darkrilin 2021</a>
<script src="/js/socket.io.js"></script>
<script src="/js/cookies.min.js"></script>
<script src="/js/fabric.min.js"></script>
<script src="/js/client.js" type="module"></script>
<script>
    function enterPress(e, id) {
        e = e || window.event;
        if (e.keyCode === 13) {
            document.getElementById(id).click();
            return false;
        }
        return true;
    }
</script>
</body>
</html>
